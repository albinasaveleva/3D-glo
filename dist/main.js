(()=>{"use strict";const e=(e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})}))},t=e=>{e.querySelectorAll("input").forEach((e=>{e.value=""}))};(e=>{const t=document.querySelector("#timer-hours"),r=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");setTimeout((()=>document.querySelector("#timer").style.opacity="1"),1e3),setInterval((()=>{const e=(()=>{const e=(new Date("20 july 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),r=Math.floor(e/60)%60;return{timeRemaining:e,hours:Math.floor(e/60/60),seconds:t,minutes:r}})(),l=(e,t)=>""===e.toString().charAt(1)?(t.textContent=`0${e}`,t.textContent):(t.textContent=e,t.textContent);e.timeRemaining<0?(t.textContent="00",r.textContent="00",o.textContent="00"):(l(e.hours,t),l(e.minutes,r),l(e.seconds,o))}),1e3)})(),(()=>{const t=document.querySelector("menu"),r=t.querySelectorAll("ul>li");document.body.addEventListener("click",(e=>{let r=e.target;(r.classList.contains("menu")||r.closest(".menu")||r.classList.contains("close-btn")||"a"===r.tagName.toLowerCase()&&r.textContent||!r.classList.contains("active-menu")&&t.classList.contains("active-menu"))&&(e=>{e.preventDefault(),t.classList.toggle("active-menu")})(e)})),r.forEach((t=>e(t,`#${t.querySelector("a").getAttribute("href").slice(1)}`)))})(),(()=>{const e=document.querySelector(".popup"),r=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),l=e.querySelector("form");let a,c=0;r.style.opacity="0",e.style.opacity="0";const s=()=>{a=requestAnimationFrame(s),c<1?(c+=.025,e.style.opacity=c,r.style.opacity=c):cancelAnimationFrame(a)},n=()=>{e.style.display&&"none"!==e.style.display?(e.style.display="none",r.style.opacity="0",e.style.opacity="0",c=0):(a=requestAnimationFrame(s),e.style.display="block")};o.forEach((e=>e.addEventListener("click",n))),e.addEventListener("click",(e=>{let r=e.target;r.matches(".popup-close")?(n(),t(l),setTimeout((()=>l.querySelector(".form-btn").disabled=!1),500),l.querySelector(".status-message")&&l.querySelector(".status-message").remove()):(r=r.closest(".popup-content"),r||(n(),t(l),setTimeout((()=>l.querySelector(".form-btn").disabled=!1),500),l.querySelector(".status-message")&&l.querySelector(".status-message").remove()))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target.closest(".service-header-tab");o&&t.forEach(((e,l)=>{o===e&&(e=>{r.forEach(((r,o)=>{e===o?(t[o].classList.add("active"),r.classList.remove("d-none")):(t[o].classList.remove("active"),r.classList.add("d-none"))}))})(l)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=e.querySelectorAll(".portfolio-item");let r,o=0;(()=>{const e=document.querySelector(".portfolio-dots");t.forEach(((t,r)=>{let o=document.createElement("li");o.classList.add("dot"),0===r&&o.classList.add("dot-active"),e.append(o)}))})();const l=e.querySelectorAll(".dot"),a=(e,t,r)=>{e[t].classList.add(r)},c=(e,t,r)=>{e[t].classList.remove(r)},s=()=>{c(t,o,"portfolio-item-active"),c(l,o,"dot-active"),o++,o>=t.length&&(o=0),a(t,o,"portfolio-item-active"),a(l,o,"dot-active")},n=(e=3e3)=>{r=setInterval(s,e)};e.addEventListener("click",(e=>{e.preventDefault();let r=e.target;r.matches(".portfolio-btn, .dot")&&(c(t,o,"portfolio-item-active"),c(l,o,"dot-active"),r.matches("#arrow-left")?o--:r.matches("#arrow-right")?o++:r.matches(".dot")&&l.forEach(((e,t)=>{e===r&&(o=t)})),o>=t.length?o=0:o<0&&(o=t.length-1),a(t,o,"portfolio-item-active"),a(l,o,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(r)})),e.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&n(2e3)})),n(2e3)})(),((e=100)=>{const t=document.querySelector(".calc-block"),r=t.querySelector(".calc-type"),o=t.querySelector(".calc-square"),l=t.querySelector(".calc-count"),a=t.querySelector(".calc-day"),c=t.querySelector("#total");t.addEventListener("change",(t=>{t.target.matches("select, input")&&(()=>{let t=0,s=1,n=1;const i=r.value,u=parseFloat(o.value);l.value&&(s+=(l.value-1)/10),a.value&&(a.value<5?n*=2:a.value<10&&(n*=1.5)),i&&u&&(t=e*i*u*s*n),c.textContent=Math.round(t)})()}))})(100),(()=>{const e=(e,t)=>{let r=t;r.test(e)&&(e.value=e.value.replace(r,""))};document.querySelectorAll("#calc input").forEach((t=>{t.addEventListener("input",(()=>e(t,/\D/)))})),document.querySelectorAll("input[required]").forEach((e=>e.removeAttribute("required"))),document.querySelectorAll(".form-name").forEach((t=>{t.addEventListener("focus",(()=>t.style.border="")),t.addEventListener("input",(()=>e(t,/[^а-яё ]/i))),t.addEventListener("blur",(e=>{if(e.target===t&&(t.value=t.value.replace(/[^а-яё ]+/i,"").replace(/ +/," ").replace(/^ | $/,""),t.value)){let e=t.value.match(/[а-яё]{2,}/gi);e?1===e.length?t.value=`${e[0].slice(0,1).toUpperCase()}${e[0].slice(1).toLowerCase()}`:t.value=`${e[0].slice(0,1).toUpperCase()}${e[0].slice(1).toLowerCase()} ${e[1].slice(0,1).toUpperCase()}${e[1].slice(1).toLowerCase()}`:t.value=t.value.replace(t.value,"")}}))})),(()=>{const t=document.querySelector(".mess");t.addEventListener("focus",(()=>t.style.border="")),t.addEventListener("input",(()=>e(t,/[^а-яё0-9 \.\,\-\(\)\:\;\?\!\"]/i))),t.addEventListener("blur",(()=>{t.value=t.value.replace(/[^а-яё0-9 \.\,\-\(\)\:\;\?\!\"]+/i,"").replace(/ +/," ").replace(/\.+/,".").replace(/\,+/,",").replace(/\-+/,"-").replace(/\(+/,"(").replace(/\)+/," )").replace(/:+/,":").replace(/;+/,";").replace(/\?+/,"?").replace(/\!+/,"!").replace(/\"+/,'"')}))})(),document.querySelectorAll(".form-email").forEach((t=>{t.addEventListener("focus",(()=>t.style.border="")),t.addEventListener("input",(()=>e(t,/[^a-z\d\_\-\!\~\'@\.\*]/i))),t.addEventListener("blur",(e=>{let r=e.target;r===t&&(t.value=t.value.replace(/[^a-z\d\_\-\!\~\'@\.\*]+/i,"").replace(/@+/,"@").replace(/\.+/,".")),r===t&&(/[a-z\d\_\-\!\~\'\.\*]+@\w+\.\w+$/i.test(t.value)||(t.value=t.value.replace(t.value,"")))}))})),(()=>{const t=document.querySelectorAll(".form-phone");new class{constructor({selector:e,masked:t="+7 (___) ___-__-__"}){this.elems=document.querySelectorAll(e),this.masked=t}mask(e,t){const r=e.keyCode,o=this.masked,l=o.replace(/\D/g,""),a=t.value.replace(/\D/g,"");let c=0,s=o.replace(/[_\d]/g,(e=>c<a.length?a.charAt(c++)||l.charAt(c):e));c=s.indexOf("_"),-1!=c&&(s=s.slice(0,c));let n=o.substr(0,t.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");n=new RegExp("^"+n+"$"),(!n.test(t.value)||t.value.length<5||r>47&&r<58)&&(t.value=s),"blur"==e.type&&t.value.length<5&&(t.value="")}start(){for(const e of this.elems)e.addEventListener("input",(()=>this.mask("input",e))),e.addEventListener("focus",(()=>this.mask("focus",e))),e.addEventListener("blur",(()=>this.mask("blur",e)))}}({selector:".form-phone",masked:"+7(___)_______"}).start(),t.forEach((t=>{t.addEventListener("focus",(()=>t.style.border="")),t.addEventListener("input",(()=>e(t,/[^0-9\(\)\+]/))),t.addEventListener("blur",(e=>{e.target===t&&(t.value=t.value.replace(/[^0-9\(\)\+]/,""),/^\+7\(\d{3}\)\d{7}$/.test(t.value)||(t.value=t.value.replace(t.value,"")))}))}))})()})(),document.querySelector("#command").querySelectorAll("img").forEach((e=>{let t;e.addEventListener("mouseover",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),(()=>{const e=document.createElement("section"),r=document.createElement("div");r.classList.add("status-message"),e.insertAdjacentHTML("beforeend",'\n        <div class="sk-three-bounce">\n            <div class="sk-bounce-1 sk-child"></div>\n            <div class="sk-bounce-2 sk-child"></div>\n            <div class="sk-bounce-3 sk-child"></div>\n        </div>\n    '),r.style.color="white",document.querySelectorAll("form").forEach((o=>{o.addEventListener("submit",(l=>{l.preventDefault();let a=o.querySelectorAll("input"),c=o.querySelector(".form-btn"),s=!1;if(a.forEach((e=>{e.value.trim()||(s=!0)})),s)a.forEach((e=>{e.value||(e.style.border="1px solid red")}));else{a.forEach((e=>{e.value&&(e.style.border="")})),o.append(r),r.textContent="",r.append(e);const l=new FormData(o);let s={};l.forEach(((e,t)=>{s[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(s).then((e=>{if(200!==e.status)throw new Error("status network not 200");r.textContent="Спасибо! Мы скоро с Вами свяжемся"})).catch((e=>{r.textContent="Упс...Что-то пошло не так",console.error(e)})),t(o),setTimeout((()=>c.disabled=!1),1500)}}))}))})();const r=document.querySelector('[href="#service-block"]');e(r,"#service-block")})();